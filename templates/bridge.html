<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bridge - Adzsend</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='responsive.css') }}">
    {% include 'partials/config_styles.html' %}
    <script src="{{ url_for('static', filename='custom_popup.js') }}"></script>
    {% include 'partials/base_scripts.html' %}
    <style>
        /* ABC Ginto Nord font */
        @font-face {
            font-family: 'ABC Ginto Nord';
            src: url('{{ url_for("static", filename="fonts/ABCGintoNord-Black-Trial.otf") }}') format('opentype');
        }

        body {
            margin: 0;
            padding: 0;
            background-color: #121215;
            color: #ffffff;
            font-family: 'gg sans';
            overflow: hidden;
            height: 100vh;
        }

        .page-wrapper {
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        .page-scroll-container {
            flex: 1;
            overflow-y: auto;
            padding-top: 60px;
            background: #121215;
        }

        .bridge-content {
            /* Content flows naturally, footer follows */
        }

        /* ==================== HERO SECTION ==================== */
        .bridge-hero {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 30px 0 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .bridge-hero-content {
            flex: 0 0 auto;
            max-width: 400px;
        }

        h1.bridge-hero-title {
            font-size: 48px !important;
            font-family: 'ABC Ginto Nord', 'gg sans Bold' !important;
            color: #ffffff !important;
            text-align: left !important;
            line-height: 1.1 !important;
            letter-spacing: -0.5px !important;
            margin: 0 !important;
            padding: 0 !important;
        }

        p.bridge-hero-description {
            font-size: 1rem !important;
            color: #ffffff !important;
            text-align: left !important;
            margin: 24px 0 0 0 !important;
            padding: 0 !important;
            line-height: 1.5 !important;
        }

        img.bridge-hero-image {
            flex: 0 0 auto !important;
            width: 490px !important;
            max-width: 490px !important;
            height: auto !important;
        }

        /* ==================== BRIDGE FEATURE PILLS ==================== */
        /* Gap variable - same as homepage */
        :root {
            --section-gap: 240px;
        }

        .bridge-feature-pills {
            display: flex;
            flex-direction: column;
            gap: var(--section-gap);
            padding: 30px;
            max-width: 1200px;
            margin: var(--section-gap) auto var(--section-gap) auto;
        }

        .bridge-feature-pill {
            display: flex;
            align-items: center;
            justify-content: space-between;
            min-height: 500px;
            /* No pill background - transparent */
            background: transparent !important;
        }

        .bridge-feature-pill.reverse {
            flex-direction: row-reverse;
        }

        .bridge-feature-pill-content {
            flex: 0 1 auto;
            max-width: 500px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 0;
        }

        h2.bridge-feature-pill-title {
            font-family: 'ABC Ginto Nord', 'gg sans' !important;
            font-size: 48px !important;
            color: #ffffff !important;
            margin: 0 !important;
            margin-bottom: 16px !important;
            text-align: left !important;
            letter-spacing: 0.5px !important;
        }

        p.bridge-feature-pill-description {
            font-size: 16px !important;
            color: #ffffff !important;
            line-height: 1.625 !important;
            margin: 0 !important;
            text-align: left !important;
        }

        /* Pill section buttons */
        .bridge-feature-pill-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 24px;
        }

        .bridge-feature-pill-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.625rem 1.5rem;
            background: #ffffff;
            border: none;
            border-radius: 8px;
            color: #121215;
            cursor: pointer;
            font-size: 0.875rem;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .bridge-feature-pill-btn:hover {
            background: #e0e0e0;
        }

        .bridge-feature-pill-btn:active {
            background: #d0d0d0;
        }

        .bridge-feature-pill-btn img {
            width: 14px;
            height: 14px;
            object-fit: contain;
            filter: brightness(0) saturate(100%) invert(6%) sepia(5%) saturate(1000%) hue-rotate(201deg) brightness(95%) contrast(92%);
        }

        /* Gradient background container */
        .bridge-feature-pill-media-container {
            flex: 0 0 auto;
            width: 480px;
            aspect-ratio: 480 / 700;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 80px;
            overflow: hidden;
            position: relative;
        }

        .bridge-feature-pill-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }

        /* Download button in hero section */
        .bridge-hero-download {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 40px;
            width: 100%;
        }

        .bridge-download-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            padding: 0.75rem 2rem;
            background: linear-gradient(to bottom, #15d8bc, #006e59);
            border: none;
            border-radius: 8px;
            color: #121215;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .bridge-download-btn:hover {
            background: linear-gradient(to bottom, #10b89e, #004e40);
        }

        .bridge-download-btn:active {
            background: linear-gradient(to bottom, #0ea08a, #003d32);
        }

        .bridge-download-btn img {
            width: 14px;
            height: 14px;
            object-fit: contain;
            filter: brightness(0) saturate(100%) invert(6%) sepia(5%) saturate(1000%) hue-rotate(201deg) brightness(95%) contrast(92%);
        }

        /* ==================== BRIDGE RESPONSIVE ==================== */
        @media (max-width: 1024px) {
            .bridge-feature-pill-media-container {
                width: 400px;
                border-radius: 60px;
            }
        }

        /* Mobile */
        @media (max-width: 900px) {
            /* Hero responsive */
            .bridge-hero {
                padding: 20px 20px 0 20px;
                flex-direction: column;
            }

            .bridge-hero-content {
                order: 2;
            }

            img.bridge-hero-image {
                order: 1;
                width: 100% !important;
                max-width: 100% !important;
            }

            h1.bridge-hero-title {
                font-size: 32px !important;
                text-align: center !important;
            }

            p.bridge-hero-description {
                font-size: 1rem !important;
                margin: 20px 0 0 0 !important;
                text-align: center !important;
            }

            .bridge-hero-download {
                margin-top: 20px;
            }

            /* Pills responsive */
            .bridge-feature-pills {
                padding: 20px;
            }

            .bridge-feature-pill {
                flex-direction: column !important;
                min-height: auto;
                align-items: center;
            }

            .bridge-feature-pill-content {
                padding: 24px;
                order: 2;
                text-align: center;
            }

            .bridge-feature-pill-content h2.bridge-feature-pill-title,
            .bridge-feature-pill-content p.bridge-feature-pill-description {
                text-align: center !important;
            }

            .bridge-feature-pill-buttons {
                justify-content: center;
            }

            .bridge-feature-pill-media-container {
                order: 1;
                width: 100%;
                max-width: 400px;
                border-radius: 48px;
            }

            h2.bridge-feature-pill-title {
                font-size: 28px !important;
                margin-bottom: 12px !important;
            }

            p.bridge-feature-pill-description {
                font-size: 14px !important;
            }
        }

        @media (max-width: 600px) {
            h1.bridge-hero-title {
                font-size: 26px !important;
            }

            p.bridge-hero-description {
                font-size: 0.9rem !important;
            }

            .bridge-feature-pill-content {
                padding: 20px;
            }

            .bridge-feature-pill-media-container {
                width: 100%;
                max-width: 320px;
                border-radius: 40px;
            }

            h2.bridge-feature-pill-title {
                font-size: 24px !important;
            }

            p.bridge-feature-pill-description {
                font-size: 13px !important;
            }
        }
    </style>
</head>
<body>
    <div class="page-wrapper">
        {% include 'navbar.html' %}

        <div class="page-scroll-container">
            <div class="bridge-content">
                <!-- Hero Section -->
                <section class="bridge-hero">
                    <div class="bridge-hero-content">
                        <h1 class="bridge-hero-title">{{ bridge_title }}</h1>
                        <p class="bridge-hero-description">{{ bridge_description }}</p>
                    </div>
                    <img src="{{ url_for('static', filename='DiscordPcImageThing.png') }}" alt="Discord PC" class="bridge-hero-image">
                </section>

                <!-- Download Button (after hero image) -->
                <div class="bridge-hero-download" id="bridge-download-container">
                    <a href="#" id="bridge-download-btn" class="bridge-download-btn" download>
                        <img src="{{ url_for('static', filename='downloadIcon.png') }}" alt="Download" id="bridge-download-icon">
                        <span id="bridge-download-text">Download for Windows</span>
                    </a>
                </div>

                <!-- Bridge Feature Pills -->
                <section class="bridge-feature-pills">
                    {% for pill in bridge_feature_pills %}
                    <div class="bridge-feature-pill {% if loop.index is even %}reverse{% endif %}">
                        <div class="bridge-feature-pill-content">
                            <h2 class="bridge-feature-pill-title">{{ pill.title }}</h2>
                            <p class="bridge-feature-pill-description">{{ pill.description }}</p>
                            {% if pill.buttons %}
                            <div class="bridge-feature-pill-buttons">
                                {% for btn in pill.buttons %}
                                <a href="{{ btn.url | process_footer_link }}" class="bridge-feature-pill-btn"{% if btn.download %} download{% endif %}>{% if btn.icon %}<img src="{{ url_for('static', filename=btn.icon) }}" alt="">{% endif %}{{ btn.text }}</a>
                                {% endfor %}
                            </div>
                            {% endif %}
                        </div>
                        <div class="bridge-feature-pill-media-container" style="background: linear-gradient({{ pill.gradient_rotation | default(135) }}deg, {{ pill.bg_gradient_start | default('#ff6bda') }}, {{ pill.bg_gradient_end | default('#ffb8ec') }});">
                            <img src="{{ url_for('static', filename=pill.image) }}" alt="{{ pill.title }}" class="bridge-feature-pill-image" style="object-position: calc(50% + {{ pill.image_offset_x | default(0) }}px) calc(50% + {{ pill.image_offset_y | default(0) }}px);">
                        </div>
                    </div>
                    {% endfor %}
                </section>
            </div>

            {% include 'partials/footer.html' %}
        </div>
    </div>

    <script>
        // OS and architecture detection for Bridge download
        (function() {
            const container = document.getElementById('bridge-download-container');
            const downloadBtn = document.getElementById('bridge-download-btn');
            const downloadText = document.getElementById('bridge-download-text');
            const downloadIcon = document.getElementById('bridge-download-icon');

            // Download URLs from config
            const downloadUrls = {
                windows_x64: '{{ bridge_download_urls.windows_x64 }}',
                windows_arm64: '{{ bridge_download_urls.windows_arm64 }}',
                macos: '{{ bridge_download_urls.macos }}',
                linux_x64: '{{ bridge_download_urls.linux_x64 }}',
                linux_arm64: '{{ bridge_download_urls.linux_arm64 }}'
            };

            // Detect OS
            function detectOS() {
                const userAgent = navigator.userAgent.toLowerCase();
                const platform = navigator.platform.toLowerCase();

                if (platform.includes('win') || userAgent.includes('windows')) {
                    return 'windows';
                } else if (platform.includes('mac') || userAgent.includes('macintosh') || userAgent.includes('mac os')) {
                    return 'macos';
                } else if (platform.includes('linux') || userAgent.includes('linux')) {
                    return 'linux';
                }
                return 'unknown';
            }

            // Detect CPU architecture
            function detectArch() {
                const userAgent = navigator.userAgent.toLowerCase();
                const platform = navigator.platform.toLowerCase();

                // Check for ARM indicators
                // Windows on ARM
                if (userAgent.includes('arm64') || userAgent.includes('aarch64')) {
                    return 'arm64';
                }
                // Windows ARM detection via platform
                if (platform.includes('arm')) {
                    return 'arm64';
                }
                // Check navigator.userAgentData if available (modern browsers)
                if (navigator.userAgentData && navigator.userAgentData.platform) {
                    // This is async but we can check the hints
                    const hints = navigator.userAgentData;
                    if (hints.platform === 'Windows') {
                        // For Windows, check if running on ARM
                        // WoW64 on ARM will show as x64 emulated, but native ARM64 apps can detect
                        if (userAgent.includes('arm') || platform.includes('arm')) {
                            return 'arm64';
                        }
                    }
                }
                // Linux ARM detection
                if (userAgent.includes('aarch64') || userAgent.includes('arm64') || userAgent.includes('armv8')) {
                    return 'arm64';
                }

                // Default to x64 for desktop platforms
                return 'x64';
            }

            const os = detectOS();
            const arch = detectArch();

            // Set button text and URL based on OS and architecture
            if (os === 'windows') {
                downloadText.textContent = 'Download for Windows';
                downloadBtn.href = (arch === 'arm64' ? downloadUrls.windows_arm64 : downloadUrls.windows_x64) || '#';
            } else if (os === 'macos') {
                downloadText.textContent = 'Download for MacOS';
                downloadBtn.href = downloadUrls.macos || '#';
            } else if (os === 'linux') {
                downloadText.textContent = 'Download for Linux';
                downloadBtn.href = (arch === 'arm64' ? downloadUrls.linux_arm64 : downloadUrls.linux_x64) || '#';
            } else {
                // Unknown OS - hide the container
                container.style.display = 'none';
            }
        })();
    </script>

    {% include 'partials/settings_popup.html' %}
</body>
</html>
