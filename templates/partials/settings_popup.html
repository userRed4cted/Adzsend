<!-- Settings Popup -->
<div class="settings-popup-overlay" id="settings-popup-overlay">
    <div class="settings-popup">
        <!-- Settings Side Menu -->
        <div class="settings-side-menu">
            <!-- Profile Section -->
            <div class="settings-profile-section">
                <div style="width: 32px; height: 32px; border-radius: 50%; background: #ff3333; flex-shrink: 0;"></div>
                <span style="color: #dcddde; font-size: 0.9rem;">Welcome!</span>
            </div>
            <div class="settings-menu-divider"></div>
            <div class="settings-menu-section">
                <div class="settings-menu-category">User settings</div>
                <button class="settings-menu-item active" data-settings-page="my-account">My account</button>
                <button class="settings-menu-item" data-settings-page="discord-accounts">Discord accounts</button>
            </div>
            <div class="settings-menu-divider"></div>
            <div class="settings-menu-section">
                <div class="settings-menu-category">Panel settings</div>
                <button class="settings-menu-item" data-settings-page="teams">Teams</button>
                <button class="settings-menu-item" data-settings-page="interval">Interval</button>
            </div>
            <div class="settings-menu-divider"></div>
            <div class="settings-menu-section">
                <div class="settings-menu-category">Payment settings</div>
                <button class="settings-menu-item" data-settings-page="billing">Billing</button>
                <button class="settings-menu-item" data-settings-page="usage">Usage</button>
            </div>
            <div class="settings-menu-divider"></div>
            <div class="settings-menu-section">
                <div class="settings-menu-category">Website settings</div>
                <button class="settings-menu-item" data-settings-page="appearance">Appearance</button>
                <button class="settings-menu-item" data-settings-page="time">Time</button>
            </div>
            <div class="settings-menu-divider"></div>
            <button class="settings-logout-btn" onclick="window.location.href='{{ url_for('logout') }}'">Logout</button>
        </div>
        <!-- Settings Content -->
        <div class="settings-content">
            <div class="settings-content-header">
                <span class="settings-content-title" id="settings-content-title">My account</span>
                <button class="settings-close-btn" onclick="closeSettingsPopup()">&times;</button>
            </div>
            <div class="settings-content-divider"></div>
            <div class="settings-content-body" id="settings-content-body">
            </div>
        </div>
    </div>
</div>

<style>
    /* Settings Popup Styles */
    .settings-popup-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.7);
        z-index: 2000;
        justify-content: center;
        align-items: center;
    }

    .settings-popup-overlay.show {
        display: flex;
    }

    .settings-popup {
        height: 90vh;
        width: 90vh;
        max-width: 95vw;
        max-height: 95vh;
        background: #121215;
        border-radius: 8px;
        border: 1px solid #222225;
        display: flex;
        overflow: hidden;
    }

    .settings-side-menu {
        width: 200px;
        background: #1A1A1E;
        border-right: 1px solid #222225;
        display: flex;
        flex-direction: column;
        padding: 1rem;
        gap: 0.5rem;
        flex-shrink: 0;
    }

    .settings-profile-section {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 0.5rem 0;
    }

    .settings-menu-section {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
    }

    .settings-menu-category {
        color: #81828A;
        font-size: 0.7rem;
        font-weight: 600;
        letter-spacing: 0.5px;
        padding: 0.25rem 0.75rem;
        margin-top: 0.25rem;
    }

    .settings-menu-item {
        display: flex;
        align-items: center;
        padding: 0.375rem 0.75rem;
        border-radius: 6px;
        color: #dcddde;
        font-size: 0.9rem;
        font-weight: 500;
        cursor: pointer;
        background: transparent;
        border: none;
        width: 100%;
        text-align: left;
    }


    .settings-menu-item.active {
        background: linear-gradient(to bottom, #15d8bc, #006e59);
        color: #121215;
    }

    .settings-menu-divider {
        height: 1px;
        background: #222225;
        margin: 0.5rem 0;
    }

    .settings-logout-btn {
        display: flex;
        align-items: center;
        padding: 0.375rem 0.75rem;
        border-radius: 6px;
        color: #991a35;
        font-size: 0.9rem;
        font-weight: 500;
        cursor: pointer;
        background: transparent;
        border: none;
        width: 100%;
        text-align: left;
    }

    .settings-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        min-width: 0;
        background: #121215;
    }

    .settings-content-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0.45rem 0.9rem;
    }

    .settings-content-title {
        color: #dcddde;
        font-size: 0.792rem;
        font-weight: 600;
    }

    .settings-close-btn {
        background: transparent;
        border: none;
        color: #81828A;
        font-size: 1.5rem;
        cursor: pointer;
        padding: 0;
        line-height: 1;
    }


    .settings-content-divider {
        height: 1px;
        background: #222225;
        margin: 0;
    }

    .settings-content-body {
        flex: 1;
        padding: 1.5rem;
        overflow-y: auto;
        background: #121215;
    }
</style>

<script>
    // Open settings popup
    function openSettings() {
        document.getElementById('settings-popup-overlay').classList.add('show');
    }

    // Close settings popup
    function closeSettingsPopup() {
        document.getElementById('settings-popup-overlay').classList.remove('show');
    }

    // Settings popup - click overlay to close
    document.getElementById('settings-popup-overlay').addEventListener('click', function(e) {
        if (e.target === this) {
            closeSettingsPopup();
        }
    });

    // Settings menu navigation
    document.querySelectorAll('.settings-menu-item').forEach(item => {
        item.addEventListener('click', function() {
            // Update active state
            document.querySelectorAll('.settings-menu-item').forEach(i => i.classList.remove('active'));
            this.classList.add('active');

            // Update header title to match button text
            document.getElementById('settings-content-title').textContent = this.textContent;
        });
    });
</script>
