<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - Borz Marketing Panel</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="panel">
        <nav class="navbar">
            <div class="navbar-content">
                <div class="navbar-left">
                    <div class="menu-icon" id="menu-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="3" y1="12" x2="21" y2="12"></line>
                            <line x1="3" y1="6" x2="21" y2="6"></line>
                            <line x1="3" y1="18" x2="21" y2="18"></line>
                        </svg>
                    </div>
                    <div class="navbar-text">
                        <h1 class="navbar-title">Borz Marketing Panel</h1>
                        <p class="navbar-subtitle">Sign up to get started</p>
                    </div>
                </div>
                <div class="nav-right">
                    {% if session.get('user') %}
                        <div class="user-info">
                            {% if session['user'].avatar %}
                                <img src="https://cdn.discordapp.com/avatars/{{ session['user'].id }}/{{ session['user'].avatar }}.png" alt="{{ session['user'].username }}" class="user-avatar">
                            {% else %}
                                <div class="user-avatar-placeholder">{{ session['user'].username[0].upper() }}</div>
                            {% endif %}
                            <div class="user-details">
                                <div class="username">{{ session['user'].username }}</div>
                                <div class="user-id">{{ session['user'].id }}</div>
                            </div>
                        </div>
                    {% else %}
                        <div class="auth-buttons">
                            <a href="{{ url_for('login_page') }}" class="auth-btn login-btn">Login</a>
                            <a href="{{ url_for('signup_page') }}" class="auth-btn signup-btn">Sign Up</a>
                        </div>
                    {% endif %}
                </div>
            </div>

            <!-- Dropdown Menu -->
            <div class="dropdown-menu" id="dropdown-menu">
                <a href="{{ url_for('home') }}" class="dropdown-item">Home</a>
                <a href="{{ url_for('purchase') }}" class="dropdown-item">Purchase</a>
                <div class="dropdown-divider"></div>
                <a href="https://discord.gg/KWt6rvCukp" target="_blank" class="dropdown-item discord-item">Discord Server</a>
            </div>
        </nav>

        <div class="panel-container">
            <div class="login-container">
                <div class="token-form">
                    <h2 class="form-title">Sign Up</h2>
                    {% if error %}
                        <div class="error-message">{{ error }}</div>
                    {% endif %}

                    <form method="POST" action="{{ url_for('signup_page') }}">
                        <div class="form-group-login">
                            <input type="password" name="user_token" class="token-input" placeholder="Paste account token here..." required>
                            <button type="submit" class="submit-btn">Sign Up</button>
                        </div>
                    </form>

                    <p class="security-warning">We strongly reccomend using an alternate account token, we take security very seriously, but we cant guarantee safety, there are always idiots who will try ruin people.</p>

                    <button type="button" class="help-btn" onclick="showTokenHelp()">How to obtain account token</button>
                    <button type="button" class="help-btn" onclick="showTokenInfo()">Why we use account tokens</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dropdown menu toggle
        const menuIcon = document.getElementById('menu-icon');
        const dropdownMenu = document.getElementById('dropdown-menu');

        if (menuIcon) {
            menuIcon.addEventListener('click', (e) => {
                e.stopPropagation();
                dropdownMenu.classList.toggle('show');
            });
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (dropdownMenu && !dropdownMenu.contains(e.target) && menuIcon && !menuIcon.contains(e.target)) {
                dropdownMenu.classList.remove('show');
            }
        });

        function showTokenHelp() {
            alert('1. Open Discord in your browser (discord.com)\n' +
                  '2. Press F12 to open Developer Tools\n' +
                  '3. Go to the "Application" tab (Chrome) or "Storage" tab (Firefox)\n' +
                  '4. In the left sidebar, expand "Local Storage"\n' +
                  '5. Click on the Discord domain\n' +
                  '6. Find the "token" key in the list\n' +
                  '7. Copy the value (your token) - make sure to exclude the "" at the start and end');
        }

        function showTokenInfo() {
            alert('So the panel can send messages on your behlaf, check if you have send permission in channels, check if your being rate limited, and so that you can post in every single server you are in. (Not doable with just Discord apps / bots)');
        }
    </script>
</body>
</html>
